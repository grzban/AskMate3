{% extends "layout.html" %}

{% block content %}
    <div class="question">
        <nav class="question_data">
            <h2>Data</h2>
            Submission time: {{ question[0].submission_time }}<br>
            Vote number: {{ question[0].vote_number }}<br>
            View number: {{ question[0].view_number }}<br>
        </nav>

        <div class="question_title">
            <h1>{{ question[0].title }}</h1>
        </div>

        <div class="question_message">
            <p>
                {{ question[0].message }}
            </p>
        </div>

        <img src="{{ question[0].image }}" class="question_image">
    </div>

    <div class="add_answer">
        <hr size="1" color="black" />
        
        <div class="add_answer">
            {% if answer_id %}
            <form action="{{ url_for('edit_answer', question_id=question_id, answer_id=answer_id) }}" method="POST">
                    <h2>Answer</h2>
                    <textarea name="message" rows="2" cols="50" class="input"></textarea>
                    <h2>Image address</h2>
                    <input type="text" name="image" class="input">
                    <button type="submit">Edit answer</button>
            </form>
            {% else %}
            <form action="{{ url_for('post_answer', question_id=question_id) }}" method="POST">
                    <h2>Answer</h2>
                    <textarea name="message" rows="2" cols="50" class="input"></textarea>
                    <h2>Image address</h2>
                    <input type="text" name="image" class="input">
                    <button type="submit">Post answer</button>
            </form>
            {% endif %}
        </div>
        <hr size="2" color="black"/>
    </div>

    {% for answer in answers %}
    {% set answer_id = answer.id %}
        <div class="answer">
            <div>
                {{ answer.message }}
            </div>

            <nav class="answer_data">
                Added: {{ answer.submission_time}}
                <br>
                Vote number: {{ answer.vote_number}}
            </nav>

            <img src="{{ answer.image }}" class="answer_image">

            <button><a href="{{ url_for('show_question', question_id=question_id, answer_id=answer_id) }}" >EDIT</a></button>
            <button><a href="{{ url_for('delete_answer', question_id=question_id, answer_id=answer_id) }}" >DELETE</a></button>

            <hr size="1" color="black" />
        </div>
    {% endfor %}
{% endblock %}
