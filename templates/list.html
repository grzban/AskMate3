{% extends "layout.html" %}

{% block content %}
    {% set QUES_HEADER = ['view_number', 'vote_number', 'title', 'submission_time'] %}
    <div id="mentors">
        <table>
            <tr>
                {% for header in QUES_HEADER %}
                <th>{{ header }}</th>
                {% endfor%}
                {% if session_flag %}
                    <th>Options</th>
                {% endif%}
            </tr>
            {% for question in list_of_questions %}
                <tr>
                    {% for header in QUES_HEADER %}
                        {% if header == 'title' %}
                        <td>
                            <a href="{{ url_for('show_question', question_id=question.id) }}">{{ question[header] }}</a>
                        </td>
                        {% else %}
                        <td>{{ question[header] }}</td>
                        {% endif %}
                    {% endfor %}
                    {% if 'user_id' in session %}
                    
                        {% if session_flag %}
                        <td>
                            <a href="{{ url_for('delete_question', question_id=question.id) }}"><img height="5%" src="{{ url_for('static', filename='images/bin.png') }}"></a>
                            <a href="{{ url_for('edit_question', question_id=question.id) }}"><img height="5%" src="{{ url_for('static', filename='images/pen.png') }}"></a>
                        </td>
                        {% endif %}
                    
                    {% endif %}
                </tr>
            {% endfor%}
        </table><br>
        {% if 'user_id' in session %}
        <form method="POST">
            <button type="submit" formaction="{{ url_for('new_question',info_for_user='You have to sign in') }}">NEW QUESTION</button>
        </form>
        {% else %}
        <p>Sign in to add new question</p>
        {% endif %}
    </div>

{% endblock %}
